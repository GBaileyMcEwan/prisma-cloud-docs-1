== Integrated API Endpoints Visibility

As you https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin/connect-your-cloud-platform-to-prisma-cloud/cloud-account-onboarding[onboard your Cloud account], Prisma Cloud Asset Inventory includes an automated discovery of all the API endpoints across your workload under *Inventory > API Endpoints*.

image::cloud-and-software-inventory/inventory-api-endpoints.png[]

This page helps you to: 

* Discover all the API endpoints in your workloads, do risk assessment, and enforce WAAS protection policies.
** Find where are the risky API endpoints in your deployment and in which Cloud account.
** Assess the services in your Cloud account that have risky API endpoints.
** Spot a shadow API with sensitive data and with lack of authentication.
* Assess the risk indicators of discovered APIs.
* Enforce xref:../runtime-security/waas/deploy-waas/deploy-waas.adoc[WAAS protection rules] on your workload.

=== Discover and Monitor API Endpoints

**Prerequisites*:

* Onboard your https://docs.paloaltonetworks.com/prisma/prisma-cloud/prisma-cloud-admin/connect-your-cloud-platform-to-prisma-cloud/cloud-account-onboarding[Cloud account].
* Enable API Discovery.
* Enable WAAS Agentless for autoamted agentless discovery.
//<TBD> - update the toggle in cloud account platform page.

Prisma Cloud uses existing WAAS runtime rules (agent-based and agentless) and AWS API Gateway to scan traffic and configurations within your deployment to discover the risky API endpoints.
You get an integrated view of all the API endpoints which you can prioritize to understand your security posture and attack vector.

The *Inventory > API Endpoints* gives insights such as, the URL Path, the HTTP method, the assets relationship, services, Cloud accounts, risk factors, the workload the API endpoints are associated with, and the discovery method.

You can group the discovered endpoints by Cloud type, service name, region, workload, and server.
Out of all the discovered endpoints, you can filter the internet exposed endpoints, endpoints with sensitive data, the HTTP methods, and recently changed/observed API endpoints.

//the vulnerabilities, and the attack path.

//<Context and traffic sampling mechanism>

[#api-risk-profiling]
=== API Risk Profiling and Findings

Select an API Endpoint to further understand it's findings for risk assessment.

<gif>

The API risk profiling gives you insights on the attack path, the audit trail, alerts profiles and the policies violated, findings, vulnerabilities and the risk factors indicators, and relationship of this endpoint with other assets in your workload.

The risk factors help you to indentify internet exposed API endpoints, endpoints detected with OWASP risks, endpoints that do not require authentication to be accessed, and the sensitive data transmitted to this endpoint, and the sensitive data returned by the server.

//Show and explain the attack paths with an example?
//Today we show the attack path on the host and not on the API endpoint.
xref:../runtime-security/waas/
Refer to 
https://docs.paloaltonetworks.com/prisma/prisma-cloud/31/prisma-cloud-compute-edition-admin/waas/waas_api_discovery#:~:text=Path%20risks%20profiling[API Discovery - Path risks profiling] for more details.

=== API Endpoints Findings

<screenshot-env-not-ready>

Go to *Investigate > Search*
Asset Type: API Endpoint
Where Finding Type in Internet Exposure
That has Vulnerability

=== What's Next

Once you onboard your Cloud accounts and assess the attack vector, you can now set WAAS rules to enforce policies on these discovered endpoints, trigger WAAS events to generate alerts when the rules are violated, and take informed decisions to protect your applications.
Refer to xref:../runtime-security/waas/deploy-waas/deploy-waas.adoc[Deploy WAAS].