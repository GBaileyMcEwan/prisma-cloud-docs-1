=== Transporter Connectivity Overview

The Transporter acts as a network tunnel that allows you to create a secure communication channel between Prisma Cloud and your self-hosted version control systems (VCS) that do not allow inbound network traffic. To establish this communication channel, two components are required:

* *Prisma Cloud Transporter Client*: A Docker container running in your environment with access to VCS isolated from inbound network traffic
* *Prisma Cloud Transporter Server*: Pre-enabled access to the server

After configuring Transporter, Prisma Cloud authenticates the connection, establishing a communication channel through WebSocket.

This overview describes Transporter connectivity, browser connectivity, and the integration of proxy connections in both Docker and Kubernetes setups.

=== Transporter Connectivity

The Transporter requires the following network access:

* Internet access to the Prisma Cloud platform. The Transporter Client only has access to egress, outbound traffic, to the Prisma Cloud Tenant. The Tenant does not initiate traffic to the client. Therefore the Tenant does not need to know the public IP of the Transporter Client and does not need to be able to access the Client directly. The Transporter Client creates a web socket tunnel on port 443. The Prisma Cloud Tenant responds on the same port, creating a VPN tunnel on top of port 443 between the Client and the Server. Once the network tunnel is created, connection is secured, and communication between the Client and Server will be bi-directional.
* Access to the Transporter client IP on the designated port (default:  TCP-8000). This connection facilitates the interaction between the browser and the Transporter client
* Access to the VCS on ports 80 and 443 

The following diagram describes Transporter connectivity in a Docker environment.
+
image::application-security/docker-connectivity-main2.0.png[]
+
*Legend*

[cols="25%a,75%a"]
|===

|*Legend*
| 

|image::application-security/legend-red.png[]
|Secure communication and data transfer between Docker Client and Prisma Cloud via port 443

|image::application-security/legend-blue.png[]
|This connection facilitates the interaction between the browser and the Transporter client, and allows the Docker Client to receive webhook events on the Docker Client from the VCS on the specified port (default: 8000)

|image::application-security/legend-green.png[]
|Secure communication and data transfer between the Docker Client and VCS Server on port 443  

|===

The following diagram describes Transporter connectivity in a Kubernetes environment. You can configure the VCS server either inside or outside the cluster. 
+
image::application-security/transporter-connectivity-k8s-main-2.0.png[]
+
NOTE: The legends for the Kubernetes and Docker diagrams (see above) are identical.

[#browser-connectivity-]
=== Browser Connectivity

To facilitate the Prisma Cloud Transporter integration, the browser that performs the setup must meet specific network access conditions.  

The following diagrams describe browser connectivity in both Docker and Kubernetes environments. 
+
image::application-security/transporter-connectivity-browser-all-2.0.png[]

* Browser requires internet access to the Prisma Cloud platform on port 443
* Browser requiresaccess to the Transporter client IP on the designated port (default: TCP-8000). This connection facilitates the interaction between the browser and the Transporter client
* Browser requires access to the VCS on port 443 

[#proxy-connectivity-]
=== Proxy Connectivity

When employing a proxy within the Prisma Cloud Transporter setup, it acts as a gateway, necessitating the Transporter client's configuration to recognize the proxy's presence. This is achieved by setting environment variables during Transporter client execution, ensuring that traffic is routed through the proxy rather than directly connecting to the cloud tenant. 

In some cases, proxies go beyond simply relaying traffic and actively inspect traffic passing through port 443. They may evaluate the traffic and decide whether to allow it or not. This necessitates providing the proxy with the client certificate when communicating through it. The client certificate serves as a trusted identifier, enabling the proxy to verify the client's authenticity and facilitate secure communication.(link)

Transporter supports deployment through a proxy for both Docker and Kubernetes configurations.

The following diagrams describe Transporter connectivity through a proxy in a Docker environment.
+
image::application-security/transporter-connectivity-docker-proxy-2.0.png[]

NOTES:

* In the first diagram, the connection between the VCS and Docker Container does not pass through the firewall, while in the second diagram, the connectivity between the VCS and Docker Container passes through a firewall
* The connectivity legend for the proxy matches with the Transporter connectivity legend above, except that traffic passes through the firewall from the Transporter Client to the Proxy, and then to the Prisma Cloud Tenant  

For more on proxy setup for Transporter in a Docker Container deployment refer to xref:deploy-transporter-docker.adoc#docker-proxy-integration-[Docker Proxy Connectivity].


The following diagram describes Transporter connectivity in a Kubernetes environment. You can configure the VCS server either inside or outside the cluster.
+
image::application-security/transporter-connectivity-k8s-proxy-2.0.png[]

NOTE:

* The legend detailing connectivity in the Kubernetes diagram matches the legend used for Docker above
* For more on proxy integration through Kubernetes see (link)
// Add link


